<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>code-blox: js (AST grouped)</title>

<!-- Acorn parser for robust AST extraction -->
<script src="https://unpkg.com/acorn@8.8.2/dist/acorn.min.js"></script>
<script srcscript>

<style>
  /* MOBILE-FIRST APPROACH */
  :root {
    --neon: #facc15;
    --neon-glow: 0 0 10px rgba(250, 204, 21, 0.5);
    --panel: #000;
    --text: #fff;
    --muted: #94a3b8;
  }
  
  * {
    box-sizing: border-box;
  }
  
  body {
    background: #000;
    color: var(--text);
    margin: 0;
    padding: 12px; /* Reduced padding for mobile */
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, monospace;
    -webkit-text-size-adjust: 100%;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* GRID - MOBILE FIRST */
  .grid {
    display: flex;
    flex-direction: column;
    gap: 20px;
    max-width: 100%;
    margin: auto;
  }
  
  /* TABLET */
  @media (min-width: 768px) {
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    body {
      padding: 16px;
    }
  }
  
  /* DESKTOP */
  @media (min-width: 1024px) {
    .grid {
      max-width: 1400px;
    }
  }
  
  /* PANELS */
  .panel {
    background: var(--panel);
    border: 2px solid rgba(250, 204, 21, 0.3); /* Thinner border for mobile */
    border-radius: 12px; /* Smaller radius */
    padding: 16px; /* Reduced padding */
    min-height: auto;
  }
  
  .panel h2 {
    margin: 0 0 12px;
    color: var(--neon);
    font-size: 18px; /* Smaller on mobile */
    font-weight: 600;
    border-bottom: 1px solid var(--neon);
    padding-bottom: 8px;
    word-break: break-word;
  }
  
  /* TEXTAREA - MOBILE OPTIMIZED4);
    border: 1px solid var(--neon);
    border-radius: 8px;
    color: var(--text);
    padding: 12px;
    font: 14px -apple-system, system-ui, monospace;
    resize: vertical;
    outline: none;
    box-sizing: border-box;
    -webkit-appearance: none;
    font-size: 14px; /* Bigger for mobile typing */
    line-height: 1.4;
  }
  
  @media (min-width: 768px) {
    textarea {
      height: 340px;
      font-size: 13.5px;
      padding: 14px;
    }
  }
  
  textarea:focus {
    border-width: 2px;
    box-shadow: 0 0 16px; /* Bigger for touch */
    margin: 4px;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    font-family: -apple-system, system-ui, sans-serif;
    transition: all 0.2s;
    font-size: 14px;
    min-height: 44px; /* Minimum touch target ON MOBILE */
  .btn-row {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin: 12px 0;
  }
  
  button.primary {
    background: var(--neon);
    color: #000;
    box-shadow: 0 2px 8px rgba(250, 204, 21, 0.5);
    flex: 1;
    min-width: 120px;
  }
  
  button.primary:hover, button.primary:active {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(250, 204, 21, 0.7);
  }
  
  button.success {
    background: #22c55e;
    color: #000;
    box-shadow: 0 2px 8px rgba(34, 197, 94, 0.5);
    flex: 1;
    min-width: 120px;
  }
  
  button.danger {
    background: #ef4444;
    color: #fff;
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.5);
    flex: 1;
    min-width: 120px;
  }
  
  button.small {
    font-size: 12px;
    /* BLOCKS CONTAINER - SCROLLABLE */
  .blocks {
    max-height: 400px; /* Reduced for mobile */
    overflow-y: auto;
    overflow-x: hidden;
    display: flex;
    flex-direction: column;
    gap: 12px;
    -webkit-overflow-scrolling: 14px;
    }
  }
  
  /* INDIVIDUAL BLOCKS */
  .block {
    background: rgba(250, 204, 21, 0.1);
    border: 1px solid rgba(250, 204, 21, 0.5);
    border-radius: 8px;
    padding: 12px;
    position: relative;
    word-break: break-word;
  }
  
  .name {
    font-size: 15px;
    font-weight: 700;
    margin-bottom: 4px;
    cursor: text;
    color: var(--neon);
    line-height: 1.3;
  }
  
  .meta {
    font-size: 12px;
    color: var(--muted);
    margin: 6px 0;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .lines {
    font-weight: bold;
    color: var(--neon);
  }
  
  .builder-block {
    border-left: 4px solid #22c55e;
    background: rgba(34, 197, 94, 0.2);
  }
  
  .builder-block .name {
    color: #22c-radius: 6px;
    overflow-x: auto;
    font-size: 11px;
    line-height: 1.3;
    margin-top: 8px;
    color: #fff;
    -webkit-overflow-scrolling: touch;
  }
  
  /* OUTPUT AREA */
  #output {
px;
    max-height: 300px; /* Smaller on mobile */
    overflow: auto;
    white-space: pre;
    color: #fff;
    -webkit-overflow-scrolling: touch;
  }
  
  @media (min-width: 768px) {
    #output {
      max-height: 560px;
      padding: 16px;
      font-size: 13px;
    }
  }
  
  /* MODAL - FULLSCREEN ON MOBILE */
  .modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    z-index: 9999;
    padding: 16px;
    overflow: auto;
    display: none;
    -webkit-overflow-scrolling: touch;
  }
  
  .modal h2 {
    color: var(--neon);
    border-bottom: 1px solid var(--neon);
    padding-bottom: 8px;
    font-size: 18px;
    margin-top: 0;
  }
  
  .modal input {
    width: 100%;
    padding: 12px;
    font-size: 16px;
    margin-bottom: 12px;
    background: rgba(0, 0, 0, 0.4);
    color: #fff;
    border: 1px solid var(--neon);
    border-radius: 8px;
    outline: none;
    box-sizing: border-box;
    -webkit-appearance: none;
  }
  
  .modal input:focus {
    border-width: 2px;
    box-shadow: 0 0 8px rgba(250, 204, 21, 0.5);
  }
  
  .modal textarea {
    height: calc(100vh - 200px); /* Dynamic height */
    font-size: 14px;
    margin-bottom: 12px;
  }
  
  /* UTILITY CLASSES FOR MOBILE */
  .mobile-only {
    display: block;
  }
  
  .desktop-only {
    display: none;
  }
  
  @media (min-width: 768px) {
    .mobile-only {
      display: none;
    }
    .desktop-only {
      display: block;
    }
  }
  
  /* SWIPE HINTS (FOR MOBILE UX) */
  .swipe-hint {
    display: none;
    text-align: center;
-size: 12px;
    color: var(--muted);
    padding: 8px;
    margin-top: 8px;
  }
  
  @media (max-width: 767px) {
    .swipe-hint {
      display: block;
    }
  }
  
  /* TOUCH-OPTIMIZED SCROLLBARS */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  ::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
  }
  
  ::-webkit-scrollbar-thumb {
    background: var(--neon);
    border-radius: 4px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: rgba(250, 204, 21, 0.8);
  }
  
  /* PREVENT TEXT SELECTION ON BUTTONS */
  button {
    user-select: none;
    -webkit-user-select: none;
  }
  
  /* IMPROVE READABILITY ON SMALL SCREENS */
  @media (max-width: 767px) {
    .block pre {
      font-size: 10px;
      padding: 8px;
    }
    
    .meta button {
      margin: 2px;
    }
  }

  /* Accordion specifics */
  .accordion { border-radius:8px; overflow:hidden; margin-bottom:12px; }
  .accordion .acc-header { display:flex; justify-content:space-between; align-items:center; padding:10px; cursor:pointer; background:rgba(255,255,255,0.02); border-bottom:1px solid rgba(255,255,255,0.02); }
  .accordion .acc-body { display:none; padding:10 .acc-body { display:block; }
  .acc-count { color:var(--muted); font-size:12px; margin-left:6px; }
  .controls { display:flex; gap:8px; margin-bottom:8px; flex-wrap:wrap; }
  .search { flex:1; min-width:120px; padding:8px; border-radius:6px; border:1px solid rgba(255,255fff; }
  .drag-hint { font-size:12px; color:var(--muted); margin-top:6px; }
  
  /* Toast */
  .toast {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #facc15;
    color: #000;
    padding: 12px 24px;
    border: 10000;
    animation: fadeInOut 2s ease-in-out;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }
  @keyframes fadeInOut {
    0% { opacity: 0; bottom:  { opacity: 0; bottom: 40px; }
  }
</style>
</head>
<body>

<div class="grid">
  <!-- LEFT PANEL - INPUT -->
  <div class="panel">
    <h2>Paste Your JS</h2>
    <textarea id="input" placeholder="// Paste JS code here..."></textarea>
    
    <div class="btn-row">
      <button class="primary" onclick="extract()">Extract Blocks</button>
      <button class="success" onclick="rebuildOriginal()">Rebuild</button>
      <button class="danger" onclick="location.reload()">Clear All</button>
    </div>
    
    <div class="mobile-only">
      <button class="small" onclick="pasteFromClipboard()">üìã Paste</button>
      <" class="search" placeholder="Filter blocks by name or code..." oninput="renderGroups()">
      <button class="small" onclick="expandAll()">Expand All</button>
      <button class="small" onclick="collapseAll()">Collapse All</button>
      <button class="small" onclick="groupToggle()">Group: <span id="groupMode">Type</span></button>
 <div class="swipe-hint">üëÜ Tap a block to edit name, use ‚ûï to add to builder</div>
    <div id="groups" class="blocks"></div>
  </div>

  <!-- RIGHT PANEL - BUILDER -->
  <div class="panel">
    <h2>Builder</h2>
    <div class="btn-row">
      <button class="danger" onclick="builder=[];update()">Clear Builder</button>
      <button class="small mobile-only" onclick="toggleBuilderView()">üì± View</button>
    </div>
    
    <div class="swipe-hint">üëÜ Reorder blocks in builder (use ‚ñ≤/‚ñº), then copy/download</div>
    <div id="builder" class="blocks" style="margin-top:8px;"></div>

    <h2 style="margin-top:20px;">Final Output</h2>
    <div class="btn-row">
      <button classprimary" onclick="copy()">üìã Copy</button>
      <button class="success" onclick="download()">üì• Download .js</button>
      <button class="small mobile-only" onclick="shareOutput()">üì§ Share</button>
    </div>
    
    <pre id="output"></pre>
  </div>
</div>

<!-- EDIT MODAL -->
<div id="editorModal" class="modal">
  <h2>Edit Block</h2>
  <input type="text" id="editName" placeholder="Block name (e.g., calculateUser)">
  <textarea id="editCode" placeholder="Edit your JavaScript code here..."></textarea>
  <div style="margin-top:12px; display: flex; gap: 8px;">
    <button class="success" onclick="saveEdit()" style="flex:1;">üíæ Save</button>
    <button class="danger" onclick="closeEditor()" style="flex:1;">‚ùå Cancel</button>
  </div>
</div>

<!-- MOBILE KEYBOARD HINT -->
<div id="keyboardHint" style="display:none; position:fixed; bottom:0; left:0; right:0; background:#111; color:#facc15; padding:10px; text-align:center; font-size:12px;">
  Tap here to close keyboard üëÜ
</div>

<script>
/* Improved AST-based extractor with grouping & conservative merging */

let originalBlocks = [];
let builder = [];
let editingIndex = -1;
let isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
let groupMode = 'type';

// Utility
function escapeHtml(text) {
  const d = document.createElement('div'); d.textContent = text; return d.innerHTML;
}
function showToast(message) {
  const existing = document.querySelector('.toast');
  if (existing) existing.remove();
  const t = document.createElement('div');
  t.className = 'toast';
  t.textContent = message;
  document.body.appendChild(t);
  setTimeout(() => t.remove(), 1600);
}
function sliceSource(src, start, end) { return src.slice(start, end); }

// Mobile helpers
function pasteFromClipboard() {
  if().then(text => {
    document.getElementById('input').value = text;
    showToast("‚úÖ Pasted");
  }).catch(() => alert("Could not paste"));
}
function loadExample() {
  const ex = `// Cloudflare Worker-ish example
import { something } from './lib.js';

const SETTINGS = {
  timeout: 3000
};

function handler(request) {
  const url = new URL(request.url);
  if (url.pathname === '/health') return new Response('OK');
  return fetch(request);
}

addEventListener('fetch', event => {
  event.respondWith(handler(event.request));
});

export default {
  fetch: handler
};`;
  document.getElementById('input').value = ex;
  showToast("Example loaded");
}
function shareOutput() {
  const out = document.getElementById('output').textContent;
  if (!out.trim()) { showToast("‚ùå No output"); return; }
  if (navigator.share) {
    navigator.share({ title: 'code-blox output', text: out.substring(0,200) });
  } else { copy(); }
}
function toggleBuilderView() {
  const b = document.getElementById('builder');
  b.style.maxHeight = b.style.maxHeight === '200px' ? '400px' : '200px';
  b.style.overflow = b.style.overflow === 'auto' ? 'hidden' : 'auto';
}

// Grouping & rendering
function groupBlocksByType(blocks) {
  const map = { imports: [], functions: [], classes: [], variables: [], exports: [], others: [] };
  for (const b of blocks) {
    if (b.type === 'import') map.imports.push(b);
    else if (b.type === 'function') map.functions.push(b);
    else if (b.type === 'class') map.classes.push(b);
    else if (b.type === 'variable') map.variables.push(b);
    else if (b.type === 'export') map.exports.push(b);
    else map.others.push(b);
  }
  return map;
}

function renderGroups() {
  const container = document.getElementById('groups');
  const q = (document.getElementById('searchBlocks') || {value:''}).value.toLowerCase().trim();
  if (!container) return;
  const filtered = originalBlocks.filter(b => {
 && b.name.toLowerCase().includes(q)) ||
           (b.content && b.content.toLowerCase().includes(q));
  });
  const groups = groupBlocksByType(filtered);
  const sections = [
    {key:'imports', title:'Imports'},
    {key:'variables', title:'Variables / Consts'},
    {key:'functions', title:'Functions'},
    {key:'classes', title:'Classes'},
    {key:'exports', title:'Exports'},
    {key:'others', title:'Other Top-level'}
  ];
  container.innerHTML = sections.map(sec => {
    const arr = groups[sec.key];
    if (!arr || arr.length === 0) return '';
    const items = arr.map((b) => `
      <div class="block" data-id="${b.id}">
        <div class="name" contenteditable="true" onblur="renameBlock('${b.id}', this.textContent.trim()||'${escape">${escapeHtml(b.name||b.type)}</div>
        <div class="meta">
          <span class="lines">${b.lines} lines</span>
          <button class="small" onclick="openEditModalById('${b.id}')">‚úèÔ∏è Edit</button>
          <button class="small" onclick="addToBuilderById('${b.id}')">‚ûï Add</button>
        </div>
      </div>
    `). return `
      <div class="accordion ${arr.length? 'acc-open' : ''}" id="acc-${sec.key}">
        <div class="acc-header" onclick="toggleAccordion('acc-${sec.key}')">
          <div>${sec.title} <span class="acc-count">(${arr.length})</span></div>
          <div style="font-size:12px;color:var(--muted      </div>
    `;
  }).join('');
}

function toggleAccordion(id) {
  const el = document.getElementById(id);
  if (!el) return;
  el.classList.toggle('acc-open');
}
function expandAll() { document.querySelectorAll('.accordion').forEach(a => a.classList.add('acc-open')); }
function collapseAll() { document.querySelectorAll('.accordion').forEach(a => a.classList.remove('acc-open')); }
function groupToggle(){ groupMode = 'type'; document.getElementById('groupMode').textContent = 'Type'; renderGroups(); }
function renameBlock(id, newName) { const b = originalBlocks.find(x => x.id === id); if (b) { b.name = newName; renderGroups(); } }
function findBlockById(id) { return originalBlocks.find(b => b.id === id); }
function openEditModalById(id) { const idx = originalBlocks.findIndex(b => b.id === id); if (idx === -1) return; editBlock(idx); }
function addToBuilderById(id) { const block = findBlockById(id); if (!block) return; if (!builder.find(b => b.id === id)) { builder.push({...block}); update(); showToast("Added to builder"); } else showToast("AlreadyById('editName').value = block.name;
  document.getElementById('editCode').value = block.content;
  document.getElementById('editorModal').style.display = 'block';
  if (isMobile) setTimeout(()=>document.getElementById('editCode').focus(), 100);
}
function saveEdit(){
  if (editingIndexName').value.trim() || b.name || 'anonymous';
  b.content = document.getElementById('editCode').value;
  b.lines = b.content.split('\n').length;
  builder = builder.map(x => x.id === b.id ? {...b} : x);
  closeEditor();
  renderGroups();
  update();
  showToast("Saved");
}
function closeEditor(){ document.getElementById('editorModal').style.display = 'none'; editingIndex = -1; if (document.activeElement) document.activeElement.blur(); }

// Builder & output
function update(){
  const builderEl = document.getElementById('builder');
  const outputEl = document.getElementById('output');
  if (!builderEl || !outputEl) return;
  builderEl.innerHTML = builder.map((b, i) => `
    <div class="block builder-block" data-id="${b.id}">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div class="name">${escapeHtml(b.name)}</div>
        <div style="display:flex;gap:6px">
          <button class="small" onclick="moveBuilder(${i},-1)">‚ñ≤</button>
          <button class="small" onclick="moveBuilder(${i},1)">‚ñº</button>
          <button class="danger small" onclick="builder.splice(${i},1);update();showToast('Removed')">‚úñ</button>
        </div>
      </div>
      <div class="meta"><span class="lines">${b.lines} lines</span></div>
      <pre>${escapeHtml(b.content.trim())}</pre>
    </div>
  `).join('') || '<div style="color:#666;padding:20px;textn' : '');
}
function moveBuilder(index, delta) { const to = index + delta; if (to < 0 || to >= builder.length) return; const tmp = builder[to]; builder[to] = builder[index]; builder[index] = tmp; update(); }
function addToBuilder(block) { if (!builder.find(b => b.id === block.id)) { builder.push({...block}); update(); showToast("Added"); } else showToast("Already added"); }

// copy/download copy(){
  const text = document.getElementById('output').textContent;
  if (!text.trim()) { showToast("Nothing"); return; }
  if (navigator.clipboard && navigator.clipboard.writeText) {
    navigator.clipboard.writeText(text).then(()=>showToast("Copied"));
  } else {
    const ta = document.createElement('textarea'); ta.value = text; document.body.appendChild(ta); ta.select();
    document.execCommand('copy'); document.body.removeChild(ta); showToast("Copied");
  }
}
function download(){
  const text = document.getElementById('output').textContent;
  if (!text.trim()) { showToast("Nothing"); return; }
  const blob = new Blob([text], {type:'application/javascript'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'code-blox-output.js'; a.click();
  URL.revokeObjectURL(url); showToast("Download started");
}

// Close modal when clicking outside
document.getElementById('editorModal').addEventListener('click', function(e){
  if (e.target === this) closeEditor();
});

// Prevent accidental reload
window.addEventListener('beforeunload', function(e){
  if (Value = '';
  }
});

/* ----- Conservative AST extractor ----- */
function extract() {
  const code = (document.getElementById('input')||{value:''}).value;
  if (!code || !code.trim()) {
    showToast("Paste code first");
    return;
  }
  originalBlocks = [];
  try {
    const comments = [];
    const ast = acorn.parse(code, {
      ecmaVersion: "latest",
      sourceType: "module",
      ranges: true,
      onComment: comments
    });

    for (const node of ast.body) {
      let nodeToUse = node;
      let t = node.type;

      if (t === "ExportNamedDeclaration" || t === "ExportDefaultDeclaration") {
        if (node.declaration) {
          nodeToUse = node.declaration;
          t = nodeToUse.type;
        } else {
          originalBlocks.push(makeBlock('export', 'export', code, node.start, node.end));
          continue;
        }
      }

      if (t === 'ImportDeclaration') {
        originalBlocks.push(makeBlock('import', 'import', code, node.start, node.end));
        continue;
      }

      if (t === 'FunctionDeclaration') {
        const name = (nodeToUse.id && nodeToUse.id.name) || 'anonymous';
        originalBlocks.push(makeBlock(name, 'function', code, node.start, node.end));
        continue;
      }

      if (t === 'ClassDeclaration') {
        const name = (nodeToUse.id && nodeToUse.id.name) || 'AnonymousClass';
        originalBlocks.push(makeBlock(name, 'class', code, node.start, node.end));
        continue;
      }

      if (t === 'VariableDeclaration') {
        // Keep whole declaration (no per-declarator splitting)
        const name = node.declarations && node.declarations[0] && node.declarations[0].id && node.declarations[0].id.name
                     ? node.declarations[0].id.name : node.kind || 'variable';
        originalBlocks.push(makeBlock(name, 'variable', code, node.start, node.end));
        continue;
      }

      // fallback
      originalBlocks.push(makeBlock(t, 'other', code, node.start, node.end));
    }

    if (originalBlocks.length === 0) {
      originalBlocks.push({ id:'full', name:'Full Script', type:'full', content: code, start:0, end: code.length, lines: code.split('\n').length });
    }

    originalBlocks.sort((a,b)=> (a.start||0)-(b.start||0));
    originalBlocks = mergeAdjacent(originalBlocks, code);

    renderGroups();
    showToast(`Extracted ${originalBlocks.length} blocks`);
  } catch (err) {
    console.error(err);
    showToast(", src, start, end) {
  const content = sliceSource(src, start, end);
  return {
    id: 'b' + Date.now().toString(36) + Math.random().toString(36).slice(2,8),
    name: name || type,
    type: type || 'other',
    content,
    start,
    end,
   Adjacent(blocks, src) {
  if (!blocks.length) return blocks;
  const merged = [ { ...blocks[0] } ];
  for (let i=1;i<blocks.length;i++) {
    const prev = merged[merged.length-1];
    const curr = blocks[i];
    const between = src.slice(prev.end, curr.start);
    const onlyWhitespace = between.trim() === '';
    const bothVarsOrImportOrOther = (prev.type === 'variable' || prev.type === 'other' || prev.type === 'import') &&
                                    (curr.type === 'variable' || curr.type === 'other' || curr.type === 'import');
    const currIsTiny = (curr.lines <= 3);
    if (onlyWhitespace && bothVarsOrImportOrOther) {
      prev.end = curr.end;
      prev.content = sliceSource(src, prev.start, prev.end);
      prev.lines = prev.content.split('\n').length;
      prev.name = prev.name || curr.name;
      continue;
    }
    if (currIsTiny && between.length <= 2) {
      prev.end = curr.end;
      prev.content = sliceSource(src, prev.start, prev.end);
      prev.lines = prev.content.split('\n').length;
      continue;
    }
    merged.push({ ...curr });
  }
  return merged;
}

function rebuildOriginal() {
  builder = originalBlocks.map(b => ({...b}));
  update();
  showToast("Rebuilt original");
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  if (isMobile) {
    const textareas = document.querySelectorAll('textarea');
    textareas.forEach(t => {
      t.addEventListener('focus', ()=>document.getElementById('keyboardHint').style.display = 'block');
      t.addEventListener('blur', ()=>document.getElementById('keyboardHint').style.display = 'none');
    });
    document.getElementById('keyboardHint').addEventListener('click', ()=> {
      if (document.activeElement) document.activeElement.blur();
      document.getElementById('keyboardHint').style.display = 'none';
    });
  }
  if (!localStorage.getItem('codeblox_visited')) {
    localStorage.setItem('codeblox_visited','1');
    setTimeout(loadExample, 400);
  }
});

// Small helper used in some places
function addToBuilderId(id) { const b = findBlockById(id); if (b) addToBuilder(b); }
function findBlockById(id) { return originalBlocks.find(b => b.id === id); }

</script>
</body>
</html>